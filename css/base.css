/**
 * =============================================================================
 * BASE.CSS - 기본 스타일 및 CSS 변수
 * =============================================================================
 * 
 * 이 파일은 프로젝트의 기본 스타일과 CSS 변수를 정의합니다.
 * 모든 CSS 파일에서 사용되는 공통 변수와 기본 요소 스타일을 포함합니다.
 * 
 * 목차:
 * 1. CSS 변수 (색상, 타이포그래피, 간격, 그림자 등)
 * 2. 기본 HTML 요소 스타일
 * 3. 타이포그래피 스타일
 * 4. 유틸리티 클래스
 * 5. 다크 모드 지원
 * 6. 접근성 설정
 */

/* =============================================================================
   1. CSS 변수 정의
   ============================================================================= */

:root {
    /* 주요 브랜드 색상 - Apple HIG 스타일 (iOS Blue) */
    --primary-color: #0A84FF;        /* iOS Accent Blue */
    --primary-hover: #0066CC;        /* Hover/Darkened Blue */
    --primary-color-rgb: 10, 132, 255; /* Focus Ring/Alpha */
    --ring-alpha: 0.12;              /* 전역 포커스 링 투명도 */
    --accent: #0A84FF;               /* 강조 색상 */
    --accent-hover: #0066CC;         /* 호버 상태의 강조 색상 */
    
    /* 배경 색상 */
    --bg-main: #FFFFFF;              /* 메인 배경색 (흰색) */
    --bg-content-secondary: #F3F4F6; /* 보조 콘텐츠 배경색 */
    
    /* 테두리 색상 */
    --border-color: #D1D5DB;         /* 기본 테두리 색상 */
    
    /* 텍스트 색상 */
    --text-primary: #111827;         /* 주요 텍스트 색상 (진한 회색) */
    --text-secondary: #374151;       /* 보조 텍스트 색상 (중간 회색) */
    
    /* 폰트 패밀리 (Apple 시스템 우선 + 한글 가독성) */
    /* 시스템 폰트 우선으로 CLS 최소화, 웹폰트는 선택적 */
    --font-body: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'SF Pro Display', 'Segoe UI', 'Malgun Gothic', 'Apple SD Gothic Neo', system-ui, 'Inter', Roboto, 'Helvetica Neue', Arial, sans-serif;  /* 본문 폰트 */
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; /* 모노스페이스 폰트 */
    
    /* 그레이 스케일 팔레트 (Tailwind CSS 기반) */
    --gray-50: #f9fafb;   /* 가장 밝은 회색 */
    --gray-100: #f3f4f6;  /* 매우 밝은 회색 */
    --gray-200: #e5e7eb;  /* 밝은 회색 */
    --gray-300: #d1d5db;  /* 연한 회색 */
    --gray-400: #9ca3af;  /* 중간 밝은 회색 */
    --gray-500: #6b7280;  /* 중간 회색 */
    --gray-600: #4b5563;  /* 중간 어두운 회색 */
    --gray-700: #374151;  /* 어두운 회색 */
    --gray-800: #1f2937;  /* 매우 어두운 회색 */
    --gray-900: #111827;  /* 가장 어두운 회색 */
    
    /* 상태 색상 */
    --success-color: #10b981;  /* 성공 상태 (녹색) */
    --error-color: #ef4444;    /* 에러 상태 (빨간색) */
    --warning-color: #f59e0b;  /* 경고 상태 (주황색) */
    --info-color: #1f2937;     /* 정보 상태 (어두운 회색) */
    
    /* 테두리 반경 - Apple 스타일 (더 부드러운 곡률) */
    --border-radius: 0.5rem;      /* 기본 테두리 반경 (8px) */
    --border-radius-full: 9999px; /* 완전한 원형 테두리 */
    
    /* 그림자 효과 - 깊이 절제, 부드러운 블러 */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 10px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
    
    /* 전환 효과 */
    --transition-fast: 0.2s ease;     /* 빠른 전환 */
    --transition-normal: 0.3s ease;   /* 일반 전환 */

    /* 보조 팔레트 (3개 제한) */
    --accent-1: #10b981; /* 그린 */
    --accent-2: #f59e0b; /* 앰버 */
    --accent-3: #ef4444; /* 레드 */
}

/* =============================================================================
   2. 기본 HTML 요소 스타일
   ============================================================================= */

/* HTML과 Body의 기본 설정 */
/* 전역 박스모델 및 오버플로우 제어 */
*, *::before, *::after { box-sizing: border-box; }

html, body { 
    height: 100%;  /* 전체 높이 설정 */
    max-width: 100%;
    overflow-x: hidden; /* 페이지 가로 스크롤 방지 */
}

body {
    font-family: var(--font-body);           /* 기본 폰트 설정 */
    background-color: var(--bg-main);        /* 배경색 설정 */
    color: var(--text-secondary);            /* 기본 텍스트 색상 */
    display: flex;                           /* 플렉스 레이아웃 */
    flex-direction: column;                  /* 세로 방향 배치 */
    -webkit-font-smoothing: antialiased;     /* 웹킷 폰트 스무딩 */
    -moz-osx-font-smoothing: grayscale;      /* 파이어폭스 폰트 스무딩 */
    font-size: 13.5px;                       /* 기본 폰트 크기 축소 */
    line-height: 1.65;                       /* 줄높이 약간 축소 */
    min-height: 100vh;
}

@media (min-width: 640px) {
    body { 
        font-size: 14.5px;                   /* 데스크톱 기본 폰트 축소 */
        line-height: 1.7; 
    }
}

/* 메인 앱 컨테이너 */
main#app-container {
    padding-left: 1rem; 
    padding-right: 1rem; 
    flex-grow: 1;
    width: 100%;
    max-width: 100%;
}

@media (min-width: 640px) {
    main#app-container { 
        padding-left: 1rem; 
        padding-right: 1rem; 
    }
}

/* 모바일에서 앱 컨테이너 좌우 패딩 제거로 실제 화면 가용폭 100% 활용 */
@media (max-width: 640px) {
    main#app-container {
        padding-left: 0;
        padding-right: 0;
    }
}

/* 앱 뷰 */
.app-view { 
    display: none; 
    opacity: 0; 
}

.app-view.active { 
    display: block; 
    opacity: 1; 
}

/* 본문 이미지: 원본 비율을 유지하고 컨테이너를 넘지 않도록 제한 */
.post-content img,
.blog-post-content img,
#view-post article img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* 프로즈 스타일 */
.prose-custom h1, 
.prose-custom h2, 
.prose-custom h3 { 
    color: var(--text-primary); 
    font-weight: 900; 
    margin-top: 2em; 
    margin-bottom: 1em; 
}

.prose-custom h1 { font-size: 2.25rem; }
.prose-custom h2 { font-size: 1.875rem; }
.prose-custom h3 { font-size: 1.5rem; }

.prose-custom h4, 
.prose-custom h5, 
.prose-custom h6 { 
    color: var(--text-primary); 
    font-weight: 700; 
    margin-top: 1.5em; 
    margin-bottom: 0.75em; 
}

.prose-custom h4 { 
    font-size: 1.25rem; 
    line-height: 1.75rem; 
}

.prose-custom h5 { 
    font-size: 1.125rem; 
    line-height: 1.5rem; 
}

.prose-custom h6 { 
    font-size: 1rem; 
    line-height: 1.5rem; 
}

.prose-custom p { 
    margin: 0 0 16px; 
    color: var(--text-secondary); 
}

.prose-custom div { 
    margin-bottom: 1.3em; 
}

/* 본문 내 이미지가 컨테이너 폭을 넘지 않도록 제한 */
.prose-custom img {
    max-width: 96%;
    height: auto;
    display: block;
    margin: 0 auto;
}

/* 모바일에서 제목/본문 간격과 폰트 크기 최적화 */
@media (max-width: 640px) {
    .prose-custom h1 { font-size: 1.75rem; margin-top: 1.5em; margin-bottom: 0.75em; }
    .prose-custom h2 { font-size: 1.5rem; margin-top: 1.25em; margin-bottom: 0.6em; }
    .prose-custom h3 { font-size: 1.25rem; margin-top: 1.2em; margin-bottom: 0.6em; }
}

/* 기본 애니메이션 */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { 
        opacity: 0;
        transform: translateY(20px);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideDown {
    from { 
        opacity: 0;
        transform: translateY(-20px);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

/* 유틸리티 클래스 */
.fade-in {
    animation: fadeIn 0.3s ease;
}

.slide-up {
    animation: slideUp 0.3s ease;
}

.slide-down {
    animation: slideDown 0.3s ease;
}

/* 접근성: 화면 비표시 텍스트 (스크린리더 전용) */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* 모바일 브라우저 간 폰트 자동 확대 차이 완화 (Samsung Internet/Chrome 정규화) */
html { -webkit-text-size-adjust: 100%; text-size-adjust: 100%; }
/* 글로벌 포커스 가시성 개선 */
a, button, [role="button"], input, select, textarea {
  outline: none;
}

a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 2px solid rgba(var(--primary-color-rgb, 0, 153, 0), var(--ring-alpha, 0.35));
  outline-offset: 2px;
  box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 0, 153, 0), 0.15);
  border-radius: var(--border-radius, 6px);
}

/* 강제 대비 모드 지원 */
@media (forced-colors: active) {
  a:focus-visible,
  button:focus-visible,
  [role="button"]:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible {
    outline: 2px solid CanvasText;
    outline-offset: 2px;
    box-shadow: none;
  }
}

/* 스티키 헤더 오프셋에 맞춘 앵커 점프 보정 */
html { scroll-padding-top: 56px; }

/* 스크린리더 전용 텍스트 개선: 포커스 시 가시화 */
.sr-only:not(:focus):not(:focus-within) {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0, 0, 0, 0);
  white-space: nowrap; border: 0;
}
.sr-only:focus,
.sr-only:focus-within {
  position: static !important;
  width: auto; height: auto;
  margin: 0; overflow: visible; clip: auto; white-space: normal;
}

/* 이미지 기본 규칙: 레이아웃 안정화 */
img {
    display: block;
    max-width: 100%;
    height: auto;
}

/* 제목 텍스트 줄바꿈 균형 */
@supports (text-wrap: balance) {
  h1, h2, h3, h4, h5, h6 { text-wrap: balance; }
}

/* 예약 크기 유틸리티 (CLS 방지) */
.reserve-16x9 { aspect-ratio: 16 / 9; }
.reserve-1x1  { aspect-ratio: 1 / 1; }
.reserve-4x3  { aspect-ratio: 4 / 3; }
.reserve-3x2  { aspect-ratio: 3 / 2; }

/* 스킵 링크: 키보드 사용자용 본문 바로가기 */
.skip-link {
  position: absolute;
  top: 0; left: 0.5rem;
  transform: translateY(-150%);
  background: white;
  color: var(--gray-900);
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--gray-300);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-sm);
  z-index: 100;
}
.skip-link:focus,
.skip-link:focus-visible {
  transform: translateY(0%);
  outline: 2px solid rgba(var(--primary-color-rgb, 0, 153, 0), var(--ring-alpha, 0.35));
  outline-offset: 2px;
}