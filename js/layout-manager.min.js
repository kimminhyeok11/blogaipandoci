(function(){const s={maxWidth:"auto",paddingX:24,gap:16,marginY:40,imageMargin:16,tolerance:16},m=640,y=!!(window.Config&&window.Config.DEBUG_LAYOUT===!0),a=(t,n=document)=>n.querySelector(t),w=(t,n=document)=>Array.from(n.querySelectorAll(t));let d=null,b=null;function v(){const t=a("#main-nav-container nav");if(!t)return null;const n=t.getBoundingClientRect();return Math.round(n.width)}function L(t){if(!t||!Number.isFinite(t))return;const n=getComputedStyle(document.documentElement).getPropertyValue("--content-max-width").trim(),e=t+"px";n!==e&&document.documentElement.style.setProperty("--content-max-width",e)}function S(t){if(!t)return;const n=getComputedStyle(document.documentElement).getPropertyValue("--content-max-width").trim();if(!n)return;const e=window.innerWidth<=m;if(t.style.maxWidth!==n&&(t.style.maxWidth=n),t.style.marginLeft!=="auto"&&(t.style.marginLeft="auto"),t.style.marginRight!=="auto"&&(t.style.marginRight="auto"),!e){const i=getComputedStyle(t),o=parseInt(i.paddingLeft,10)||0,c=parseInt(i.paddingRight,10)||0;o===0&&!t.style.paddingLeft&&(t.style.paddingLeft=s.paddingX+"px"),c===0&&!t.style.paddingRight&&(t.style.paddingRight=s.paddingX+"px")}}function I(t){w("img",t||document).forEach(e=>{e.closest(".post-card")||e.classList.contains("post-card-thumb-img")||e.dataset.centered!=="1"&&(e.style.display="block",e.style.margin=`${s.imageMargin}px auto`,e.style.maxWidth="100%",e.style.height="auto",e.dataset.centered="1")})}function x(){const t=[],n=a("#view-library > section");n&&t.push(n);const e=a("#view-post > article");e&&t.push(e);const i=a("#view-archives > section");i&&t.push(i);const o=a("#view-writer > section");o&&t.push(o);const c=u=>!!u&&u.offsetParent!==null&&getComputedStyle(u).display!=="none"&&u.getBoundingClientRect().width>0;return t.filter(c)}function O(){const t=v(),n=x(),e=[];return y&&(n.forEach(i=>{const o=i.getBoundingClientRect(),c=document.documentElement.clientWidth||window.innerWidth,u=c<=m,W=Math.round(o.left),E=Math.round(c-o.right),R=Math.abs(W-E)<=s.tolerance,C=u?!0:t?Math.abs(Math.round(o.width)-t)<=s.tolerance:!0,f=[];if(Math.round(o.width)===0)return;C||f.push(`\uCEE8\uD14C\uC774\uB108 \uB108\uBE44(${Math.round(o.width)}px) != \uB124\uBE44 \uB108\uBE44(${t}px)`),R||f.push(`\uC591\uCE21 \uB9C8\uC9C4 \uBD88\uADE0\uD615 left=${W}px, right=${E}px`);const h=w("img",i).filter(p=>{if(p.closest(".post-card")||p.classList.contains("post-card-thumb-img"))return!1;const g=getComputedStyle(p);return!(g.display==="block"&&g.marginLeft==="auto"&&g.marginRight==="auto")}).length;h&&f.push(`\uC911\uC559 \uC815\uB82C\uB418\uC9C0 \uC54A\uC740 \uC774\uBBF8\uC9C0 ${h}\uAC1C`),e.push({element:i,widthMatches:C,marginBalanced:R,imgNotCentered:h,issues:f})}),y&&(e.some(i=>i.issues.length)?(console.group("%cLayout Inspector: \uACBD\uACE0","color:#b45309;font-weight:bold"),e.forEach((i,o)=>{i.issues.length&&console.warn(`#${o+1}`,i.issues.join(" | "),i.element)}),console.info("\uC81C\uC548:",["- \uCEE8\uD14C\uC774\uB108\uC5D0 maxWidth\uB97C \uB124\uBE44\uAC8C\uC774\uC158 \uB108\uBE44\uB85C \uB3D9\uAE30\uD654(\uC790\uB3D9 \uC801\uC6A9\uB428).","- \uC591\uCE21 \uB9C8\uC9C4\uC744 auto\uB85C \uC124\uC815\uD574 \uC911\uC559 \uC815\uB82C \uC720\uC9C0(\uC790\uB3D9 \uC801\uC6A9\uB428).","- \uC774\uBBF8\uC9C0\uC5D0 display:block + margin:auto \uC9C0\uC815(\uC790\uB3D9 \uC801\uC6A9\uB428)."].join(`
`)),console.groupEnd()):console.log("%cLayout Inspector: \uC77C\uAD00\uC131 OK","color:#16a34a;font-weight:bold"))),e}function A(t){t&&(t.style.gap=s.gap+"px")}function M(){const t=v();t&&(d===null||Math.abs(t-d)>4)&&(d=t,L(t)),x().forEach(i=>{S(i),A(i),I(i)}),O()}let l=null;function r(){l&&cancelAnimationFrame(l),l=requestAnimationFrame(()=>{l=null,M()})}function D(t){r()}function T(){var e;r(),document.fonts&&typeof((e=document.fonts.ready)==null?void 0:e.then)=="function"&&document.fonts.ready.then(()=>r());const t=a("#app-container");t&&new MutationObserver(()=>{r()}).observe(t,{childList:!0,subtree:!0});const n=a("#main-nav-container nav");n&&"ResizeObserver"in window&&(b=new ResizeObserver(()=>r()),b.observe(n)),window.addEventListener("resize",()=>r())}window.DesignGuide=s,window.LayoutManager={init:T,onViewRendered:D,syncAll:M}})();
